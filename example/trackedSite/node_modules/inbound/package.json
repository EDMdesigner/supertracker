{
  "name": "inbound",
  "version": "0.0.6",
  "description": "Url referrer and campaign parsing utilities",
  "author": {
    "name": "Ilya Volodarsky",
    "email": "ilya@segment.io"
  },
  "engines": {
    "node": ">= 0.8"
  },
  "main": "./index",
  "repository": {
    "type": "git",
    "url": "git://github.com/segmentio/inbound"
  },
  "scripts": {
    "test": "mocha --reporter spec"
  },
  "dependencies": {
    "underscore": "*",
    "async": "*",
    "tldextract": "*"
  },
  "devDependencies": {
    "should": "*",
    "mocha": "*"
  },
  "readme": "# inbound\n---------------\n\ninbound is a referrer parsing library for node.js / express web apps.\n\n## How To Use\n\n### Install\n```\nnpm install inbound\n```\n\n### API\n```javascript\nvar inbound = require('inbound');\ninbound.referrer.parse(url, referrer, function (err, description) {\n    console.log(description);\n});\n```\n\n**url** (string) is the page url, equivalent to client-side javascript's ```window.location.href``` or express.js ```req.url```\n\n**referrer** (string) is the referrer, equivalent to client-side javascript's ```document.referrer``` or express.js ```req.header('referrer')```\n\n### Express.js Middleware\n```javascript\nvar inbound = require('inbound'),\n    express = require('express');\n\nvar app = express();\n\napp.use(function (req, res, next) {\n  var referrer = req.header('referrer');\n  var href = req.url;\n  inbound.referrer.parse(href, referrer, function (err, desc) {\n    req.referrer = desc;\n    next(err);\n  });\n});\n\napp.use(app.router);\n\napp.get('/', function (req, res, next) {\n  return res.send(req.referrer);\n});\n\nvar port = 8000;\napp.listen(port);\nconsole.log('Server listening on port : ' + port);\n```\n\n## Examples\n\nHere is an  example of a visitor clicking a twitter link and ending up at a New Yorker article.\n\n```javascript\nvar url = \"http://www.newyorker.com/online/blogs/johncassidy/2012/08/economy-points-to-dead-heat-in-november.html?\nmbid=gnep&google_editors_picks=true\";\nvar referrer = \"http://twitter.com/ryah\";\n\ninbound.referrer.parse(url, referrer, function (err, description) {\n    console.log(description);\n});\n```\n```json\n{\n  \"referrer\": {\n    \"type\": \"social\",\n    \"network\": \"twitter\"\n  }\n}\n```\n\nHere's an example of a visitor clicking a campaign email from gmail, and arriving at a blog:\n\n```javascript\nvar url = \"http://blog.intercom.io/churn-retention-and-reengaging-customers/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+contrast%2Fblog+%28The+Intercom+Blog%29\";\nvar referrer =  \"https://mail.google.com/_/mail-static/_/js/main/m_i,t/rt=h/ver=am293eyFlXI.en./sv=1/am=!v8Czf-oeNMn1FOzaNKsLQrJy-oNN3RSSYMAZTBUxCzwgQcXtLnTEHCkGr437GpFE2Dliuw/d=1\";\n\ninbound.referrer.parse(url, referrer, function (err, description) {\n    console.log(description);\n});\n```\n```json\n{\n  \"referrer\": {\n     \"type\": \"email\",\n     \"client\": \"gmail\",\n     \"from\": \"https://mail.google.com/_/mail-static/_/js/main/m_i,t/rt=h/ver=am293eyFlXI.en./sv=1/am=!v8Czf-oeNMn1FOzaNKsLQrJy-oNN3RSSYMAZTBUxCzwgQcXtLnTEHCkGr437GpFE2Dliuw/d=1\",\n     \"link\": \"http://blog.intercom.io/churn-retention-and-reengaging-customers/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+contrast%2Fblog+%28The+Intercom+Blog%29\"\n  },\n  \"campaign\": {\n    \"source\": \"feedburner\",\n    \"medium\": \"feed\",\n    \"campaign\": \"Feed: contrast/blog (The Intercom Blog)\"\n  }\n}\n```\n\n## Supported Matchers\n\n### Social\n* [Facebook](https://github.com/segmentio/inbound/tree/master/lib/matchers/social/facebook.js)\n* [Twitter](https://github.com/segmentio/inbound/tree/master/lib/matchers/social/twitter.js)\n* [Google+](https://github.com/segmentio/inbound/tree/master/lib/matchers/social/googlePlus.js)\n* [Pinterest](https://github.com/segmentio/inbound/tree/master/lib/matchers/social/pinterest.js)\n* [LinkedIn](https://github.com/segmentio/inbound/tree/master/lib/matchers/social/linkedin.js)\n* [Me2day](https://github.com/segmentio/inbound/tree/master/lib/matchers/social/me2day.js)\n\n### Search\n* [Google](https://github.com/segmentio/inbound/tree/master/lib/matchers/search/google.js)\n* [Bing](https://github.com/segmentio/inbound/tree/master/lib/matchers/search/bing.js)\n* [Yahoo](https://github.com/segmentio/inbound/tree/master/lib/matchers/search/yahoo.js)\n* [Baidu](https://github.com/segmentio/inbound/tree/master/lib/matchers/search/baidu.js)\n* [Yandex](https://github.com/segmentio/inbound/tree/master/lib/matchers/search/yandex.js)\n* [Naver](https://github.com/segmentio/inbound/tree/master/lib/matchers/search/naver.js)\n* [Daum](https://github.com/segmentio/inbound/tree/master/lib/matchers/search/daum.js)\n* [Nate](https://github.com/segmentio/inbound/tree/master/lib/matchers/search/nate.js)\n\n### Email Clients\n* [Gmail](https://github.com/segmentio/inbound/tree/master/lib/matchers/email/gmail.js)\n* [Yahoo](https://github.com/segmentio/inbound/tree/master/lib/matchers/email/yahoo.js)\n* [Hotmail](https://github.com/segmentio/inbound/tree/master/lib/matchers/email/hotmail.js)\n* [Naver](https://github.com/segmentio/inbound/tree/master/lib/matchers/email/naver.js)\n* [Daum](https://github.com/segmentio/inbound/tree/master/lib/matchers/email/daum.js)\n\n### Ads\n* [Bing](https://github.com/segmentio/inbound/tree/master/lib/matchers/ad/bing.js)\n* [Google](https://github.com/segmentio/inbound/tree/master/lib/matchers/ad/google.js)\n* [Yahoo](https://github.com/segmentio/inbound/tree/master/lib/matchers/ad/yahoo.js)\n\n### Internal\nInternal referrers occur when a visitor navigates between two pages of the same domain. Example: http://site.com => http://site.com/about\n\n* [Internal](https://github.com/segmentio/inbound/tree/master/lib/matchers/internal/internal.js)\n\n### Link\nIf there is a referrer present but it's unrecognized above, we'll just call it a link referrer.\n\n* [Link](https://github.com/segmentio/inbound/tree/master/lib/matchers/link/link.js)\n\n### Direct\nWhen a visitor navigates to a site by typing in the url into the address bar, ```document.referrer``` is blank. This is called a direct referral. (There are some [other reasons](#why-is-my-documentreferrer-blank) this can happen as well.)\n\n* [Direct](https://github.com/segmentio/inbound/tree/master/lib/matchers/direct/direct.js)\n\n## Utilities\n\n### Shorten API\n\nIf you want to count the number of people who came from a specific referrer, you might want to make the following map:\n\n```referrer => { set_of_visitors }```\n\nHowever, referrers and urls tend to have differences that don't really matter to you, but are slightly different.\n\nUse the `inbound.shorten` API to make the referrers and domains unique.\n\n```javascript\ninbound.shorten.url('https://segment.io/?imm_mid=094f89&cmp=em-npa-ug-nl-sep15-html')\n// \"segment.io\"\n\ninbound.shorten.url('http://ianstormtaylor.com/oocss-plus-sass-is-the-best-way-to-css/?utm_source=hackernewsletter&utm_medium=email')\n// \"ianstormtaylor.com/oocss-plus-sass-is-the-best-way-to-css\n```\n\n## Contribute\n\n### Contributors\n+ [@ivolo](https://github.com/ivolo)\n+ [@asolove](https://github.com/asolove)\n+ [@xissy](https://github.com/xissy)\n+ [@rybnik](https://github.com/rybnik)\n\n### Matchers\nMatchers help identify and attach more semantic information to referral sources. We'd your help on adding the hundreds of social, search, ad, and other referral sources not matched yet by inbound.\n\nTo add matchers:\n\n1. Using existing matchers as an example, create your matcher at [/lib/matchers/](https://github.com/segmentio/inbound/tree/master/lib/matchers/).\n1. Add your matcher to the priority list of matchers in [index.js](https://github.com/segmentio/inbound/tree/master/lib/matchers/index.js).\n1. Add your test cases to [the test cases file](https://github.com/segmentio/inbound/tree/master/test/cases/referrers.json).\n1. Run and confirm that your test cases pass: ```npm test```\n1. Add your matcher to the [readme](https://github.com/segmentio/inbound/tree/master/README.md).\n1. Submit your pull request!\n\n## Advanced\n\n### Why is my document.referrer blank?\n1. The visitor came directly to your site by typing the link into the browser's bar.\n2. The visitor clicked a link on an https:// page and arrived at a http:// page, such as clicking a link to http://hypem.com on a https://gmail.com email. (Chrome will strip the referrer since you're downgrading security).\n3. You were 301 redirected via a proxy that didn't maintain the referrer header.\n\n### Why is the matchers API asynchronous?\n\nEven though most matchers do synchronous string matching, leaving the API asynchronous allows matchers that fill in more semantic information about the referrer by hitting some sort of API.\n\n## License\n\n\n```\nWWWWWW||WWWWWW\n W W W||W W W\n      ||\n    ( OO )__________\n     /  |           \\\n    /o o|    MIT     \\\n    \\___/||_||__||_|| *\n         || ||  || ||\n        _||_|| _||_||\n       (__|__|(__|__|\n```\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/segmentio/inbound/issues"
  },
  "_id": "inbound@0.0.6",
  "dist": {
    "shasum": "fc0b49cb42efc70dc4773e95ce0ddd73c989446c",
    "tarball": "http://registry.npmjs.org/inbound/-/inbound-0.0.6.tgz"
  },
  "_from": "inbound@",
  "_npmVersion": "1.3.11",
  "_npmUser": {
    "name": "ivolo",
    "email": "ivolo@mit.edu"
  },
  "maintainers": [
    {
      "name": "ivolo",
      "email": "ivolo@mit.edu"
    }
  ],
  "directories": {},
  "_shasum": "fc0b49cb42efc70dc4773e95ce0ddd73c989446c",
  "_resolved": "https://registry.npmjs.org/inbound/-/inbound-0.0.6.tgz"
}
